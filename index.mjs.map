{"version":3,"file":"index.mjs","sources":["../lib/main.js","../lib/assign.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport isPlainObject from '@stdlib/assert-is-plain-object';\nimport { isPrimitive as isNumber } from '@stdlib/assert-is-number';\nimport { isPrimitive as isString } from '@stdlib/assert-is-string';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport isMostlySafeCast from '@stdlib/ndarray-base-assert-is-mostly-safe-data-type-cast';\nimport getDType from '@stdlib/ndarray-dtype';\nimport getShape from '@stdlib/ndarray-shape';\nimport getOrder from '@stdlib/ndarray-order';\nimport empty from '@stdlib/ndarray-empty';\nimport assign from '@stdlib/ndarray-base-assign';\nimport resolveStr from '@stdlib/ndarray-base-dtype-resolve-str';\nimport sorthp from '@stdlib/blas-ext-sorthp';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// MAIN //\n\n/**\n* Returns a new ndarray containing the elements of an input ndarray sorted along one or more ndarray dimensions using heapsort.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {(ndarrayLike|number|string)} [sortOrder=1.0] - sort order\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform operation\n* @param {*} [options.dtype] - output ndarray data type\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} sort order argument must be either an ndarray-like object, a numeric value, or a supported string\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 3, 1, 2 ];\n*\n* // Define the array strides:\n* var sx = [ 2, 2, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = toSortedhp( x );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ [ [ -5.0, -3.0 ] ], [ [ 1.0, 2.0 ] ], [ [ 4.0, 6.0 ] ] ]\n*/\nfunction toSortedhp( x ) {\n\tvar sortOrder;\n\tvar options;\n\tvar nargs;\n\tvar xdt;\n\tvar ydt;\n\tvar y;\n\tvar o;\n\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\tnargs = arguments.length;\n\to = arguments[ 1 ];\n\n\t// Case: toSortedhp( x )\n\tif ( nargs < 2 ) {\n\t\tsortOrder = 1;\n\t}\n\t// Case: toSortedhp( x, ??? )\n\telse if ( nargs === 2 ) {\n\t\t// Case: toSortedhp( x, sortOrder_string || sortOrder_scalar || sortOrder_ndarray ) )\n\t\tif ( isString( o ) || isNumber( o ) || isndarrayLike( o ) ) {\n\t\t\tsortOrder = o;\n\t\t}\n\t\t// Case: toSortedhp( x, options )\n\t\telse {\n\t\t\tsortOrder = 1;\n\t\t\toptions = o;\n\t\t\tif ( !isPlainObject( options ) ) {\n\t\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t\t}\n\t\t}\n\t}\n\t// Case: toSortedhp( x, sortOrder, options )\n\telse if ( nargs >= 3 ) {\n\t\tsortOrder = o;\n\t\toptions = arguments[ 2 ];\n\t\tif ( !isPlainObject( options ) ) {\n\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t}\n\t}\n\txdt = getDType( x );\n\tif ( options && hasOwnProp( options, 'dtype' ) ) {\n\t\tydt = options.dtype;\n\t\tif ( !isMostlySafeCast( xdt, ydt ) ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. First argument cannot be safely cast to the output data type. Data types: [%s, %s].', resolveStr( xdt ), resolveStr( ydt ) ) );\n\t\t}\n\t} else {\n\t\tydt = xdt;\n\t}\n\t// Create an output ndarray:\n\ty = empty( getShape( x ), {\n\t\t'dtype': ydt,\n\t\t'order': getOrder( x )\n\t});\n\n\t// Copy elements from the input ndarray to the output ndarray:\n\tassign( [ x, y ] );\n\n\treturn sorthp( y, sortOrder, options || {} );\n}\n\n\n// EXPORTS //\n\nexport default toSortedhp;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport isMostlySafeCast from '@stdlib/ndarray-base-assert-is-mostly-safe-data-type-cast';\nimport resolveStr from '@stdlib/ndarray-base-dtype-resolve-str';\nimport copy from '@stdlib/ndarray-base-assign';\nimport getDType from '@stdlib/ndarray-dtype';\nimport sorthp from '@stdlib/blas-ext-sorthp';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// MAIN //\n\n/**\n* Sorts the elements of an input ndarray along one or more ndarray dimensions using heapsort and assigns the results to an output ndarray.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {ndarrayLike} y - output ndarray\n* @param {(ndarrayLike|number|string)} [sortOrder=1.0] - sort order\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform operation\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} second argument must be an ndarray-like object\n* @throws {TypeError} sort order argument must be either an ndarray-like object, a numeric value, or a supported string\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {TypeError} first argument cannot be safely cast to the data type of the second argument\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import zeros from '@stdlib/ndarray-zeros';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 3, 1, 2 ];\n*\n* // Define the array strides:\n* var sx = [ 2, 2, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Create an output ndarray;\n* var y = zeros( sh );\n*\n* // Perform operation:\n* var out = assign( x, y );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ [ [ -5.0, -3.0 ] ], [ [ 1.0, 2.0 ] ], [ [ 4.0, 6.0 ] ] ]\n*\n* var bool = ( y === out );\n* // returns true\n*/\nfunction assign( x, y ) {\n\tvar nargs;\n\tvar xdt;\n\tvar ydt;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\tif ( !isndarrayLike( y ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Second argument must be an ndarray-like object. Value: `%s`.', y ) );\n\t}\n\txdt = getDType( x );\n\tydt = getDType( y );\n\tif ( !isMostlySafeCast( xdt, ydt ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. First argument cannot be safely cast to the output data type. Data types: [%s, %s].', resolveStr( xdt ), resolveStr( ydt ) ) );\n\t}\n\tnargs = arguments.length;\n\tcopy( [ x, y ] );\n\tif ( nargs <= 2 ) {\n\t\treturn sorthp( y );\n\t}\n\tif ( nargs === 3 ) {\n\t\treturn sorthp( y, arguments[ 2 ] );\n\t}\n\t// nargs > 3\n\treturn sorthp( y, arguments[ 2 ], arguments[ 3 ] );\n}\n\n\n// EXPORTS //\n\nexport default assign;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Return a new ndarray containing the elements of an input ndarray sorted along one or more ndarray dimensions using heapsort.\n*\n* @module @stdlib/blas-ext-to-sortedhp\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray from '@stdlib/ndarray-ctor';\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import toSortedhp from '@stdlib/blas-ext-to-sortedhp';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 3, 1, 2 ];\n*\n* // Define the array strides:\n* var sx = [ 2, 2, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = toSortedhp( x );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ [ [ -5.0, -3.0 ] ], [ [ 1.0, 2.0 ] ], [ [ 4.0, 6.0 ] ] ]\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import zeros from '@stdlib/ndarray-zeros';\n* import ndarray from '@stdlib/ndarray-ctor';\n* import toSortedhp from '@stdlib/blas-ext-to-sortedhp';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 3, 1, 2 ];\n*\n* // Define the array strides:\n* var sx = [ 2, 2, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Create an output ndarray;\n* var y = zeros( sh );\n*\n* // Perform operation:\n* var out = toSortedhp.assign( x, y );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ [ [ -5.0, -3.0 ] ], [ [ 1.0, 2.0 ] ], [ [ 4.0, 6.0 ] ] ]\n*\n* var bool = ( y === out );\n* // returns true\n*/\n\n// MODULES //\n\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport main from './main.js';\nimport assign from './assign.js';\n\n\n// MAIN //\n\nsetReadOnly( main, 'assign', assign );\n\n\n// EXPORTS //\n\nexport default main;\n\n// exports: { \"assign\": \"main.assign\" }\n"],"names":["toSortedhp","x","sortOrder","options","nargs","xdt","ydt","y","o","isndarrayLike","TypeError","format","arguments","length","isString","isNumber","isPlainObject","getDType","hasOwnProp","dtype","isMostlySafeCast","resolveStr","empty","getShape","order","getOrder","assign","sorthp","copy","setReadOnly","main"],"mappings":";;88CAmFA,SAASA,EAAYC,GACpB,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEJ,IAAMC,EAAeR,GACpB,MAAM,IAAIS,UAAWC,EAAQ,SAAUV,IAMxC,GAHAO,EAAII,UAAW,IADfR,EAAQQ,UAAUC,QAIL,EACZX,EAAY,OAGR,GAAe,IAAVE,GAET,GAAKU,EAAUN,IAAOO,EAAUP,IAAOC,EAAeD,GACrDN,EAAYM,OAMZ,GAFAN,EAAY,GAENc,EADNb,EAAUK,GAET,MAAM,IAAIE,UAAWC,EAAQ,SAAUR,SAKrC,GAAKC,GAAS,IAClBF,EAAYM,GAENQ,EADNb,EAAUS,UAAW,KAEpB,MAAM,IAAIF,UAAWC,EAAQ,SAAUR,IAIzC,GADAE,EAAMY,EAAUhB,GACXE,GAAWe,EAAYf,EAAS,UAEpC,GADAG,EAAMH,EAAQgB,OACRC,EAAkBf,EAAKC,GAC5B,MAAM,IAAII,UAAWC,EAAQ,wGAAyGU,EAAYhB,GAAOgB,EAAYf,UAGtKA,EAAMD,EAWP,OARAE,EAAIe,EAAOC,EAAUtB,GAAK,CACzBkB,MAASb,EACTkB,MAASC,EAAUxB,KAIpByB,EAAQ,CAAEzB,EAAGM,IAENoB,EAAQpB,EAAGL,EAAWC,GAAW,CAAE,EAC3C,CC3DA,SAASuB,EAAQzB,EAAGM,GACnB,IAAIH,EACAC,EACAC,EACJ,IAAMG,EAAeR,GACpB,MAAM,IAAIS,UAAWC,EAAQ,SAAUV,IAExC,IAAMQ,EAAeF,GACpB,MAAM,IAAIG,UAAWC,EAAQ,iFAAkFJ,IAIhH,GAFAF,EAAMY,EAAUhB,GAChBK,EAAMW,EAAUV,IACVa,EAAkBf,EAAKC,GAC5B,MAAM,IAAII,UAAWC,EAAQ,wGAAyGU,EAAYhB,GAAOgB,EAAYf,KAItK,OAFAF,EAAQQ,UAAUC,OAClBe,EAAM,CAAE3B,EAAGM,IACNH,GAAS,EACNuB,EAAQpB,GAED,IAAVH,EACGuB,EAAQpB,EAAGK,UAAW,IAGvBe,EAAQpB,EAAGK,UAAW,GAAKA,UAAW,GAC9C,CCZAiB,EAAAC,EAAA,SAAAJ"}